root@cloud:~/PhucAnDuongCMS-3# # Create test data via SQL
PGPASSWORD='PhucAn2025!' psql -h localhost -U postgres -d phuanduong_db << 'EOF'

-- Insert test branches
INSERT INTO branches (id, name, address, phone, manager_id, target_revenue, status, created_at, updated_at)
VALUES 
  ('branch-001', 'Chi nhánh Quận 1', '123 Nguyễn Huệ, Q.1, TP.HCM', '0901234567', NULL, 50000000, 'active', NOW(), NOW()),
  ('branch-002', 'Chi nhánh Quận 7', '456 Nguyễn Văn Linh, Q.7, TP.HCM', '0907654321', NULL, 40000000, 'active', NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- Insert test cards
INSERT INTO cards (id, card_number, card_type, holder_name, holder_phone, holder_email, branch_id, issue_date, expiry_date, status, max_services, current_services, price, created_at, updated_at)
VALUES 
  ('card-001', 'PA001001', 'Standard', 'Nguyễn Văn A', '0912345678', 'nguyenvana@email.com', 'branch-001', NOW(), NOW() + INTERVAL '1 year', 'active', 10, 3, 2000000, NOW(), NOW()),
  ('card-002', 'PA001002', 'VIP', 'Trần Thị B', '0923456789', 'tranthib@email.com', 'branch-001', NOW(), NOW() + INTERVAL '1 year', 'active', 20, 5, 5000000, NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- Insert test staff
INSERT INTO staff (id, name, email, phone, branch_id, position, hire_date, salary, status, created_at, updated_at)
VALUES 
  ('staff-001', 'Lê Văn C', 'levanc@phuan.com', '0934567890', 'branch-001', 'Nhân viên', NOW(), 8000000, 'active', NOW(), NOW()),
  ('staff-002', 'Phạm Thị D', 'phamthid@phuan.com', '0945678901', 'branch-002', 'Quản lý', NOW(), 15000000, 'active', NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- Verify inserted data
SELECT 'Branches:' as table_name, COUNT(*) as count FROM branches
UNION ALL
SELECT 'Cards:', COUNT(*) FROM cards
UNION ALL
SELECT 'Staff:', COUNT(*) FROM staff;

EOF

echo ""
echo "✅ Test data created! Thử các API sau:"
echo ""
echo "# Login and get session"
curl -s -X POST http://103.72.96.173:5000/api/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@phuan.com","password":"admin123"}' \
  -c /tmp/session.txt

echo -e "\n\n# Get cards"
curl -s http://103.72.96.173:5000/api/cards -b /tmp/session.txt

echo -e "\n\n# Get branches"  
curl -s http://103.72.96.173:5000/api/branches -b /tmp/session.txt

echo -e "\n\n# Get staff"
curl -s http://103.72.96.173:5000/api/staff -b /tmp/session.txt
ERROR:  column "phone" of relation "branches" does not exist
LINE 1: INSERT INTO branches (id, name, address, phone, manager_id, ...
                                                 ^
ERROR:  column "holder_name" of relation "cards" does not exist
LINE 1: INSERT INTO cards (id, card_number, card_type, holder_name, ...
                                                       ^
ERROR:  column "phone" of relation "staff" does not exist
LINE 1: INSERT INTO staff (id, name, email, phone, branch_id, positi...
                                            ^
 table_name | count 
------------+-------
 Branches:  |     0
 Cards:     |     0
 Staff:     |     0
(3 rows)


✅ Test data created! Thử các API sau:

# Login and get session
{"id":"admin-001","email":"admin@phuan.com","role":"admin","status":"active"}

# Get cards
[]

# Get branches
[]

# Get staff
[]root@cloud:~/PhucAnDuongCMS-3# 
